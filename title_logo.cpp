//=============================================================================
//
// タイトルロゴ
// Author : Yuda Kaito
//
//=============================================================================
//-----------------------------------------------------------------------------
// include
//-----------------------------------------------------------------------------
#include "application.h"
#include "title_logo.h"

//-----------------------------------------------------------------------------
// コンストラクタ
//-----------------------------------------------------------------------------
CTitleLogo::CTitleLogo(CTaskGroup::EPriority list) :
	CObject2d(list)
{
}

//-----------------------------------------------------------------------------
// デストラクタ
//-----------------------------------------------------------------------------
CTitleLogo::~CTitleLogo()
{
}

//-----------------------------------------------------------------------------
// 初期化
//-----------------------------------------------------------------------------
HRESULT CTitleLogo::Init()
{
	CObject2d::Init();
	D3DXVECTOR3 pos = CApplication::CENTER_POS;
	SetPos(pos);
	SetTexture("TITLE_LOGO");
	m_count = 0;
	m_rateSizeX = 0.35f;
	m_rateSizeY = 0.01f;

	return S_OK;
}

//-----------------------------------------------------------------------------
// 終了
//-----------------------------------------------------------------------------
void CTitleLogo::Uninit()
{
}

//-----------------------------------------------------------------------------
// 出現中更新
//-----------------------------------------------------------------------------
void CTitleLogo::PopUpdate()
{
	if (m_count < 45)
	{
		m_count++;
		return;
	}

	auto easeOutBack = [](float cnt)
	{
		const float c1 = 1.70158f;
		const float c3 = c1 + 1.0f;

		return 1.0f + c3 * powf(cnt - 1.0f, 3.0f) + c1 * pow(cnt - 1.0f, 2.0f);
	};

	if (m_rateSizeX > 0.25f)
	{
		m_rateSizeX -= easeOutBack(0.075f) * 0.025f;
	}

	if (m_rateSizeY < 0.25f)
	{
		m_rateSizeY += easeOutBack(0.075f) * 0.025f;
	}

	SetSize(D3DXVECTOR3(1376 * m_rateSizeX, 256 * m_rateSizeY, 0.0f));

	if (m_rateSizeY <= 0.25f && m_rateSizeY >= 0.25f)
	{
		m_updateStatus = EUpdateStatus::NORMAL;
	}

	CObject2d::NormalUpdate();
}

//-----------------------------------------------------------------------------
// 通常中更新
//-----------------------------------------------------------------------------
void CTitleLogo::NormalUpdate()
{
	CObject2d::NormalUpdate();
}

//-----------------------------------------------------------------------------
// 終了中更新
//-----------------------------------------------------------------------------
void CTitleLogo::EndUpdate()
{
	Release();
}
